{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pre-Nómina</title>
    <link rel="stylesheet" href="{% static 'css/prenomina.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <!-- Título de la página -->
    <div class="prenomina-titulo">
        <h1>Listado de Pre-Nóminas Pensionados</h1>
    </div>

    <!-- Contenedor principal -->
    <div class="prenomina-contenedor">
        <!-- Panel de búsqueda -->
        <div class="prenomina-busqueda">
            <div class="prenomina-busqueda__grupo">
                <input type="text" id="buscarFecha" class="prenomina-busqueda__input" placeholder="Buscar por período (ej: Mar/2025)">
                <button onclick="buscarPorFecha()" class="prenomina-busqueda__boton">
                    <i class="fa-solid fa-magnifying-glass"></i>
                </button>
                <button onclick="limpiarBusqueda()" class="prenomina-busqueda__boton secundario">
                    <i class="fa-solid fa-broom"></i>
                </button>
            </div>
        </div>

        <!-- Tabla de pre-nóminas -->
        <div class="prenomina-tabla__contenedor">
            <table class="prenomina-tabla">
                <thead class="prenomina-tabla__thead">
                    <tr class="prenomina-tabla__fila">
                        <th class="prenomina-tabla__columna">ID</th>
                        <th class="prenomina-tabla__columna">Período</th>
                        <th class="prenomina-tabla__columna">Tipo</th>
                        <th class="prenomina-tabla__columna">Secuencia</th>
                        <th class="prenomina-tabla__columna">Total</th>
                        <th class="prenomina-tabla__columna">Acciones</th>
                    </tr>
                </thead>
                <tbody class="prenomina-tabla__tbody">
                    {% for p in prenominas %}
                    <tr class="prenomina-tabla__fila">
                        <td class="prenomina-tabla__celda">{{ p.id_prenomina }}</td>
                        <td class="prenomina-tabla__celda">{{ p.periodo }}</td>
                        <td class="prenomina-tabla__celda">{{ p.tipo }}</td>
                        <td class="prenomina-tabla__celda">{{ p.secuencia }}</td> 
                        <td class="prenomina-tabla__celda">{{ p.total }}</td>
                        <td class="prenomina-tabla__celda">
                            <button class="prenomina-tabla__boton"
                                    data-prenomina-id="{{ p.id_prenomina }}"
                                    onclick="mostrarRecibo(this)">
                                Ver Detalles
                            </button>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

    <!-- Modal de Pre-Nómina -->
    <div class="prenomina-modal" id="preNominaModal">
        <div class="prenomina-modal__contenido" id="contenidoPreNomina">
            <!-- Contenido dinámico aquí -->
        </div>
        <div class="prenomina-modal__acciones">
            <button class="prenomina-modal__boton" onclick="exportarPDF()">
                <i class="fa-solid fa-file-pdf"></i> Exportar PDF
            </button>
            <button class="prenomina-modal__boton" onclick="imprimirPreNomina()">
                <i class="fa-solid fa-print"></i> Imprimir
            </button>
            <button class="prenomina-modal__boton" onclick="preNominaModal__cerrar()">Cerrar</button>
        </div>
    </div>

    <!-- Scripts -->
    <script src="{% static 'javascript/menu_principal/subs_menus/prenomina.js' %}"></script>
</body>
</html>
